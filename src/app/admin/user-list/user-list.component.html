<div class="usersTable">

    <div>
        <label for="filterForm">Filtrar por:</label>
        <select name="filterForm" id="filterForm" [(ngModel)]="filter">
            <option value="">Sin filtro</option>
            <option value="GEN_ADMIN">Administradores</option>
            <option value="USER">Usuarios regulares</option>
        </select>

        <label for="">Ordenar por:</label>
        <select name="" id="" [(ngModel)]="order">
            <option value="">Orden por defecto</option>
            <option value="name_asc">Nombre Ascendente</option>
            <option value="name_desc">Nombre Descendente</option>
            <option value="mail_asc">Correo electr贸nico Ascendente</option>
            <option value="mail_desc">Correo electr贸nico Descendente</option>
        </select>

        <!-- <button (click)="admin.filteredData(filter)">Filtrar y ordenar</button> -->

    </div>

    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Correo electr贸nico</th>
                <th>Direcci贸n</th>
                <th>Trabajo</th>
                <th>Rol</th>
            </tr>
        </thead>
        <tbody *ngIf="admin.isLoading()">
            <tr>
              <td colspan="5">
                <div class="loader">
                  <span class="loader-text">Cargando...</span>
                  <span class="load"></span>
                </div>
              </td>
            </tr>
        </tbody>
          
          <tbody *ngIf="!admin.isLoading()">
            <tr class="tableBody" *ngFor="let user of admin.filteredData(filter, order)">
              <td>{{user.name}}</td>
              <td>{{user.email}}</td>
              <td>{{formatNulls(user.address)}}</td>
              <td>{{formatNulls(user.job)}}</td>
              <td>
                <form (ngSubmit)="changeRole(user.role, user.id.valueOf())">
                  <input type="number" hidden [value]="user.id">
                  <select [(ngModel)]="user.role" name="role--{{user.id}}">
                    <option [ngValue]="'GEN_ADMIN'">Administrador</option>
                    <option [ngValue]="'USER'">Usuario</option>
                  </select>
                  <button type="submit">Confirmar cambios</button>
                </form>
              </td>
            </tr>
          </tbody>
          
    </table>

</div>
  